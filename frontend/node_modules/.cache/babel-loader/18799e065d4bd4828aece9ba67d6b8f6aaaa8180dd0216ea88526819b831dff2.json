{"ast":null,"code":"/**\n * API Service - Cliente HTTP con axios\n * FIXED: URL directa sin depender de env vars\n */\n\nimport axios from \"axios\";\n\n// Usar variable de entorno con fallback\nconst API_BASE_URL = process.env.REACT_APP_BACKEND_URL || \"https://netveil.preview.emergentagent.com\";\nconsole.log(\" API Base URL:\", API_BASE_URL);\nconsole.log(\" Environment:\", process.env.REACT_APP_BACKEND_URL);\n\n// Crear instancia de axios\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 15000,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\n\n// Interceptor de request\napi.interceptors.request.use(config => {\n  var _config$method;\n  const fullUrl = `${config.baseURL}${config.url}`;\n  console.log(\"ðŸ“¤ Request:\", (_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase(), fullUrl);\n  return config;\n}, error => {\n  console.error(\"âŒ Request Error:\", error);\n  return Promise.reject(error);\n});\n\n// Interceptor de response\napi.interceptors.response.use(response => {\n  console.log(\"âœ… Response:\", response.status, response.config.url);\n  return response;\n}, error => {\n  if (error.response) {\n    var _error$config;\n    console.error(\"âŒ API Error:\", {\n      status: error.response.status,\n      url: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url,\n      data: error.response.data\n    });\n  } else if (error.request) {\n    console.error(\"âŒ Network Error:\", error.message);\n  } else {\n    console.error(\"âŒ Error:\", error.message);\n  }\n  return Promise.reject(error);\n});\n\n// ========== AUTH API ==========\nexport const authAPI = {\n  register: userData => api.post(\"/api/users/\", userData),\n  login: username => api.get(`/api/users/by-username/${username}`),\n  getUserByUsername: username => api.get(`/api/users/by-username/${username}`)\n};\n\n// ========== USERS API ==========\nexport const usersAPI = {\n  listUsers: () => api.get(\"/api/users/\"),\n  followUser: (username, targetUsername) => api.post(`/api/users/${username}/follow/${targetUsername}`),\n  unfollowUser: (username, targetUsername) => api.delete(`/api/users/${username}/follow/${targetUsername}`),\n  getFollowing: username => api.get(`/api/users/${username}/following`),\n  getSuggestions: (username, limit = 10) => api.get(`/api/users/${username}/suggestions`, {\n    params: {\n      limit\n    }\n  })\n};\n\n// ========== POSTS API ==========\nexport const postsAPI = {\n  // Crear post: POST /api/posts/\n  createPost: postData => api.post(\"/api/posts/\", postData),\n  // Obtener feed: GET /api/users/{username}/feed\n  getFeed: (username, mode = \"all\", limit = 20) => api.get(`/api/users/${username}/feed`, {\n    params: {\n      mode,\n      limit\n    }\n  }),\n  // Like/Unlike post\n  likePost: (postId, username) => api.post(`/api/posts/${postId}/like`, null, {\n    params: {\n      username\n    }\n  }),\n  unlikePost: (postId, username) => api.delete(`/api/posts/${postId}/like`, {\n    params: {\n      username\n    }\n  }),\n  getPostLikes: (postId, username = null) => api.get(`/api/posts/${postId}/likes`, {\n    params: {\n      username\n    }\n  }),\n  // Trending posts\n  getTrendingPosts: (limit = 10) => api.get(\"/api/trending/posts\", {\n    params: {\n      limit\n    }\n  })\n};\n\n// ========== DMS API ==========\nexport const dmsAPI = {\n  sendDM: dmData => api.post(\"/api/dm/send\", dmData),\n  getConversation: (username, otherUsername, limit = 50) => api.get(`/api/dm/${username}/${otherUsername}`, {\n    params: {\n      limit\n    }\n  }),\n  listConversations: username => api.get(`/api/dm/conversations/${username}`)\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_BACKEND_URL","console","log","api","create","baseURL","timeout","headers","interceptors","request","use","config","_config$method","fullUrl","url","method","toUpperCase","error","Promise","reject","response","status","_error$config","data","message","authAPI","register","userData","post","login","username","get","getUserByUsername","usersAPI","listUsers","followUser","targetUsername","unfollowUser","delete","getFollowing","getSuggestions","limit","params","postsAPI","createPost","postData","getFeed","mode","likePost","postId","unlikePost","getPostLikes","getTrendingPosts","dmsAPI","sendDM","dmData","getConversation","otherUsername","listConversations"],"sources":["/home/rodrigo/Documents/RODRIGO/FI/9noSemestre/NoSql/Proyecto/The_Social_Service/frontend/src/services/api.js"],"sourcesContent":["/**\n * API Service - Cliente HTTP con axios\n * FIXED: URL directa sin depender de env vars\n */\n\nimport axios from \"axios\";\n\n// Usar variable de entorno con fallback\nconst API_BASE_URL =\n  process.env.REACT_APP_BACKEND_URL ||\n  \"https://netveil.preview.emergentagent.com\";\n\nconsole.log(\" API Base URL:\", API_BASE_URL);\nconsole.log(\" Environment:\", process.env.REACT_APP_BACKEND_URL);\n\n// Crear instancia de axios\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 15000,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\n// Interceptor de request\napi.interceptors.request.use(\n  (config) => {\n    const fullUrl = `${config.baseURL}${config.url}`;\n    console.log(\"ðŸ“¤ Request:\", config.method?.toUpperCase(), fullUrl);\n    return config;\n  },\n  (error) => {\n    console.error(\"âŒ Request Error:\", error);\n    return Promise.reject(error);\n  }\n);\n\n// Interceptor de response\napi.interceptors.response.use(\n  (response) => {\n    console.log(\"âœ… Response:\", response.status, response.config.url);\n    return response;\n  },\n  (error) => {\n    if (error.response) {\n      console.error(\"âŒ API Error:\", {\n        status: error.response.status,\n        url: error.config?.url,\n        data: error.response.data,\n      });\n    } else if (error.request) {\n      console.error(\"âŒ Network Error:\", error.message);\n    } else {\n      console.error(\"âŒ Error:\", error.message);\n    }\n    return Promise.reject(error);\n  }\n);\n\n// ========== AUTH API ==========\nexport const authAPI = {\n  register: (userData) => api.post(\"/api/users/\", userData),\n  login: (username) => api.get(`/api/users/by-username/${username}`),\n  getUserByUsername: (username) =>\n    api.get(`/api/users/by-username/${username}`),\n};\n\n// ========== USERS API ==========\nexport const usersAPI = {\n  listUsers: () => api.get(\"/api/users/\"),\n  followUser: (username, targetUsername) =>\n    api.post(`/api/users/${username}/follow/${targetUsername}`),\n  unfollowUser: (username, targetUsername) =>\n    api.delete(`/api/users/${username}/follow/${targetUsername}`),\n  getFollowing: (username) => api.get(`/api/users/${username}/following`),\n  getSuggestions: (username, limit = 10) =>\n    api.get(`/api/users/${username}/suggestions`, { params: { limit } }),\n};\n\n// ========== POSTS API ==========\nexport const postsAPI = {\n  // Crear post: POST /api/posts/\n  createPost: (postData) => api.post(\"/api/posts/\", postData),\n\n  // Obtener feed: GET /api/users/{username}/feed\n  getFeed: (username, mode = \"all\", limit = 20) =>\n    api.get(`/api/users/${username}/feed`, { params: { mode, limit } }),\n\n  // Like/Unlike post\n  likePost: (postId, username) =>\n    api.post(`/api/posts/${postId}/like`, null, { params: { username } }),\n\n  unlikePost: (postId, username) =>\n    api.delete(`/api/posts/${postId}/like`, { params: { username } }),\n\n  getPostLikes: (postId, username = null) =>\n    api.get(`/api/posts/${postId}/likes`, { params: { username } }),\n\n  // Trending posts\n  getTrendingPosts: (limit = 10) =>\n    api.get(\"/api/trending/posts\", { params: { limit } }),\n};\n\n// ========== DMS API ==========\nexport const dmsAPI = {\n  sendDM: (dmData) => api.post(\"/api/dm/send\", dmData),\n  getConversation: (username, otherUsername, limit = 50) =>\n    api.get(`/api/dm/${username}/${otherUsername}`, { params: { limit } }),\n  listConversations: (username) => api.get(`/api/dm/conversations/${username}`),\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}